<body>
  <h3>Form Validation Example</h3>
  <form
    id="userForm"
    style="
      max-width: 400px;
      margin: 0 auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
    "
  >
    <div class="input-group" style="margin-bottom: 15px">
      <label for="username" style="display: block; margin-bottom: 5px"
        >Username:</label
      >
      <input
        type="text"
        id="username"
        name="username"
        required
        style="
          width: 100%;
          padding: 8px;
          border: 1px solid #ccc;
          border-radius: 4px;
        "
      />
      <span class="error" style="color: red; font-size: 12px"></span>
    </div>
    <div class="input-group" style="margin-bottom: 15px">
      <label for="email" style="display: block; margin-bottom: 5px"
        >Email:</label
      >
      <input
        type="email"
        id="email"
        name="email"
        required
        style="
          width: 100%;
          padding: 8px;
          border: 1px solid #ccc;
          border-radius: 4px;
        "
      />
      <span class="error" style="color: red; font-size: 12px"></span>
    </div>
    <div class="input-group" style="margin-bottom: 15px">
      <label for="password" style="display: block; margin-bottom: 5px"
        >Password:</label
      >
      <input
        type="password"
        id="password"
        name="password"
        required
        minlength="6"
        style="
          width: 100%;
          padding: 8px;
          border: 1px solid #ccc;
          border-radius: 4px;
        "
      />
      <span class="error" style="color: red; font-size: 12px"></span>
    </div>
    <button
      type="submit"
      style="
        padding: 10px 20px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 4px;
      "
    >
      Submit
    </button>
  </form>

  <script>
    const form = document.getElementById("userForm");

    // Event Bubbling: Validate on Submit
    form.addEventListener("submit", (event) => {
      event.preventDefault();
      let isValid = true;
      Array.from(form.elements).forEach((input) => {
        if (input.tagName === "INPUT") {
          const errorSpan = input.nextElementSibling;
          if (!input.checkValidity()) {
            isValid = false;
            errorSpan.textContent = input.validationMessage;
          } else {
            errorSpan.textContent = "";
          }
        }
      });
      if (isValid) {
        alert("Form submitted successfully!");
      }
    });

    // Event Capturing: Validate on Blur
    form.addEventListener(
      "blur",
      (event) => {
        if (event.target.tagName === "INPUT") {
          const input = event.target;
          const errorSpan = input.nextElementSibling;
          if (!input.checkValidity()) {
            errorSpan.textContent = input.validationMessage;
          } else {
            errorSpan.textContent = "";
          }
        }
      },
      true
    );
  </script>
</body>
